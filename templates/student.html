<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages</title>

    <!-- tailwind css -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">

    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- custom css -->
    <link rel="stylesheet" href="../static/student.css">
</head>
<body class="flex flex-col h-screen gap-0 overflow-hidden">
    <header id="header" class="d-flex justify-content-center py-3 bg-primary text-white w-full mb-0">
        Student Page
    </header>
    <div id="my-content" class="flex-grow w-full mt-0 overflow-hidden">
        
        <!-- Sidebar with chats list -->
        <div id="sidebar" class="d-flex flex-column flex-shrink-0 bg-gray-100 h-full overflow-hidden max-w-sm">
            <div class="flex justify-between items-center mb-4">
                <!-- Chat Search Bar -->
                <div class="px-3 pt-3 d-flex align-items-center w-full">
                    <input
                        type="text"
                        class="form-control flex-grow-1 me-2 sidebar-content-hide"
                        placeholder="🔍 Search Chats..."
                        aria-label="ChatSearch"
                        aria-describedby="basic-addon1"
                    >
                    <button
                        type="button"
                        class="block p-2 rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300"
                        id="toggle-sidebar"
                        aria-label="Toggle Sidebar"
                    >≣</button>
                </div>
            </div>

            <!-- Sorts/Filters -->
            <div class="d-flex gap-2 px-3 pb-3 sidebar-content-hide">
                <select class="form-select bg-primary text-white w-75" id="sort-by-btn" name="sortBy">
                    <option value="coursesByRecent">Sort by: Recent</option>
                    <option value="coursesByDiscipline">Sort by: Discipline</option>
                </select>
                <select class="form-select bg-primary text-white w-25" id="filter-by-btn" name="filterBy">
                    <option value="allCourses">All</option>
                    <!-- List disciplines -->
                </select>
            </div>

            <!-- List of existing chats -->
            <div class="space-y-2 flex-grow ps-3 pb-3 overflow-y-auto sidebar-content-hide">
                <!-- TODO: implement with php -->
                <div class="d-grid gap-2">
                    <a href="?chat_id=1" class="block p-3 rounded hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=2" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=3" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=4" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=5" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=6" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=7" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=8" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                    <a href="?chat_id=9" class="block p-3 rounded active:bg-gray-300 hover:bg-gray-200 bg-gray-100 message-container">
                        <div class="font-medium truncate">courseName</div>
                        <div class="text-xs text-gray-500 truncate">mostRecentMessage</div>
                    </a>
                </div>

            </div>
        </div>
        


        <!-- Main chat area -->
        <div id="chat-container" class="flex flex-col bg-white py-2 h-full overflow-hidden">
            <!-- Chat header -->
            <div class="align-self-start px-3 w-full border-b-2 border-gray-100">
                <h2 class="text-xl font-bold">courseName (php)</h2>
                <div class="text-sm text-gray-500 pb-2">courseDescription</div>
            </div>

            <!-- Messages area -->
            <div id="conversation" class="flex-1 overflow-y-auto space-y-4 -mb-3 -mt-2 w-full">
                <!-- Previous conversation will be loaded here -->
                <div class="sm:px-3 md:px-12 lg:px-24 xl:px-36">
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            This is a message from the user. It can be quite long to test how the chat window scrolls. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            This is a reply from the bot.
                        </div>
                    </div>
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            Another message from the user.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            And another reply. This one is also a bit longer to simulate real conversation flow. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                        </div>
                    </div>
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            Short message.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            Okay, here is a really long message to absolutely guarantee a scrollbar appears if the window is small enough. This message needs to be exceptionally verbose to exceed the height of the chat window and demonstrate the overflow y auto functionality. We are going to keep adding more text here, making sure it's long enough to push other messages out of view, forcing the scrollbar to become visible. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.
                        </div>
                    </div>
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            This is a message from the user. It can be quite long to test how the chat window scrolls. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            This is a reply from the bot.
                        </div>
                    </div>
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            Another message from the user.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            And another reply. This one is also a bit longer to simulate real conversation flow. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                        </div>
                    </div>
                    <div class="flex justify-end py-2">
                        <div class="bg-blue-500 text-white p-2 rounded-lg max-w-2xl">
                            Short message.
                        </div>
                    </div>
                    <div class="flex justify-start py-2">
                        <div class="bg-gray-200 p-2 rounded-lg max-w-2xl">
                            Okay, here is a really long message to absolutely guarantee a scrollbar appears if the window is small enough. This message needs to be exceptionally verbose to exceed the height of the chat window and demonstrate the overflow y auto functionality. We are going to keep adding more text here, making sure it's long enough to push other messages out of view, forcing the scrollbar to become visible. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.
                        </div>
                    </div>
                </div>
                <!-- php? -->
            </div>

            <!-- Message input -->
            <form method="POST" name="messageForm" class="mt-auto w-full">
                <!-- php -->
                <div id="input-container" class="flex gap-2 sm:px-3 md:px-12 lg:px-24 xl:px-36">
                    <textarea
                        id="student-question"
                        name="message"
                        class="flex-1 border rounded-lg p-2 m-0 focus:outline-none focus:ring-2 focus:ring-blue-500 break-words resize-none overflow-y-auto max-h-48"
                        placeholder="Ask a question..."
                        rows="1"
                        required
                    ></textarea>
                </div>
                <div class="text-xs text-center text-gray-500 pb-2">AI Tutor can make mistakes. Chat is logged and viewable by teachers.</div>
            </form>
            <!-- When no chats are currently opened: -->
            <!-- php -->
        </div>
    </div>

    <!-- <footer id="footer"></footer> -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="../static/student.js"></script>
</body>
</html>